schematizerdatabase:
    build: schema/

schematizerconfigs:
    build: acceptance/configs/

schematizerservice:
    build: .
    dockerfile: Dockerfile
    links:
        - schematizerdatabase
    volumes_from:
        - schematizerconfigs
    ports:
        - "49257:8888"

# TODO(DATAPIPE-1507|abrar): may be move tis into a different file.
schematizerserviceopensource:
    build: .
    dockerfile: Dockerfile-opensource
    links:
        - schematizerdatabase
    volumes_from:
        - schematizerconfigs
    ports:
        - "49257:8888"
    environment:
      - SERVICE_CONFIG_PATH=config-open-source.yaml
      - FORCE_AVOID_INTERNAL_PACKAGES=True
