
<div class="container">

    <!-- Loading bar, so that the UI doesn't look frozen when we're getting a list of schemas. -->
    <!-- The loading bar should disappear when the schema end-point returns. -->
    <div class="row" ng-show="load">
        <div class="col-lg-12">
            <div class="progress">
                <div class="progress-bar progress-bar-striped active" role="progressbar" style="width: 100%"></div>
            </div>
        </div>
    </div>

    <!-- Area to display errors, if there are any, when getting a list of schemas -->
    <div class="row" ng-show="tableError">
        <div class="col-lg-12">
            <div class="alert alert-danger" role="alert">Table failed to load</div>
        </div>
    </div>

    <div class="row" ng-hide="load || tableError">
        <div class="col-md-12">
            <ol class="breadcrumb">
                <li><a href="#">{{tableData.namespace.name}}</a></li>
                <li class="active"><a href="#">{{tableData.source}}</a></li>
            </ol>
            <br />
            <h5>Table Info</h5>
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="row padded">
                                <div class="col-md-3"><b>Owner</b></div>
                                <div class="col-md-9"><a href="mailto:{{tableData.source_owner_email}}">{{tableData.source_owner_email}}</a></div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"><b>Description</b></div>
                                <div class="col-md-9"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row padded">
                                <!-- TODO(wscheng#DATAPIPE-310): Add code to actually edit and save categories. Functions currently placeholders. -->
                                <div class="col-md-3"><b>Category <span id="catBtn">(<a href="javascript: editCategory();">Edit</a>)</span><span id="saveBtn" style="display: none;">(<a href="javascript: saveCategory();">Save</a>)</span></b></div>
                                <div class="col-md-9" id="category">Business Info</div>
                            </div>
                            <div class="row padded">
                                <div class="col-md-3"><b>Last Updated</b></div>
                                <div class="col-md-9">{{tableData.updated_at}}</div>
                            </div>
                            <div class="row padded">
                                <div class="col-md-3"><b>Source</b></div>
                                <div class="col-md-9"><a href="#"></a></div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-top: 10px;">
                        <div class="col-md-9">
                            <div class="row">
                                <div class="col-md-2"><b>Notes(<a href="" ng-click="editTableNote()">Edit</a>)</b></div>
                                <div class="col-md-10" id="table_notes" ng-hide="isEditingTableNote">
                                    <p id="table_notes_content" title="Last edited by {{tableNote.last_updated_by}}">{{tableNote.note}}</p>
                                </div>
                                <div class="col-md-10" ng-show="isEditingTableNote">
                                    <textarea id="table_notes_form" class="form-control" rows=4 ng-model="tableNoteEdit"></textarea>
                                    <a class="btn btn-default" ng-click="saveTableNote()">Save</a>
                                    <a class="btn btn-default" ng-click="cancelTableNote()">Cancel</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-12">
            <h5>Columns - {{schemaElements.length}} Total</h5>
            <table class="table table-striped table-bordered">
                <th class="col-md-2">Name</th>
                <th class="col-md-2">Type</th>
                <th class="col-md-4">Description</th>
                <th class="col-md-4">Notes</th>
                <tr ng-repeat="field in schemaElements">
                    <td>{{field.key}}</td>
                    <td>{{field.element_type}}</td>
                    <td>{{field.doc}}</td>
                    <td>{{field.note.note}}</td>
                </tr>
            </table>
        </div>
    </div>
</div>
