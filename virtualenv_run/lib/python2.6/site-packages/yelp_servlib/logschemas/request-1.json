{
    "id": "http://y/service-web-request-log-1#",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "ServiceWebRequestLog",
    "description": "Service Request Log Schema",
    "type": "object",
    "properties": {
        "hostname": {
            "format": "hostname",
            "type": "string"},
        "unique_request_id": {"type": ["string", "null"]},
        "method_name": {"type": "string"},
        "time": {"type": "number"},
        "time_elapsed": {"type": "number"},
        "request": {"$ref": "#/definitions/request"},
        "response": {"$ref": "#/definitions/response"},
        "version": {"type": "string"}
    },
    "required": ["hostname", "method_name", "unique_request_id", "time", "time_elapsed", "request", "response"],
    "additionalProperties": false,
    "definitions": {
        "request": {"type": "object", 
                    "properties": {
                        "headers": {"type": "object"},
                        "host": {"type": ["string", "null"]},
                        "method": {"enum": ["GET", "POST", "PUT", "DELETE", "HEAD", "OPTIONS"]},
                        "remote_ip": {"type": "string", "format": "ipv4"},
                        "uri": {"type": "string"}
                     },
                     "required": ["headers", "host", "method", "remote_ip", "uri"],
                     "additionalProperties": false
                   },
        "response": {"type": "object",
                     "properties": {
                         "status_code": {"type": "number"},
                         "headers": {"type": "object"}
                     },
                     "required": ["status_code", "headers"],
                     "additionalProperties": false
        }
    }
}
