"""
Utility methods for doing functional programming.
"""
import time


def poll(f, timeout=None, interval=1):
    """Poll the zero-argument function `f` every `interval` seconds
    for up to `timeout` seconds until it returns a truthy value.

    If timeout is None, only stop polling when f returns a truthy value.

    Returns False if the timeout is reached and True otherwise."""

    start = time.time()
    while timeout is None or (time.time() - start) < timeout:
        if f():
            return True
        time.sleep(interval)
    return False
