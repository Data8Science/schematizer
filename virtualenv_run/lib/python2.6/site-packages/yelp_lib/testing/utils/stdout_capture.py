import StringIO
import sys

from contextlib import contextmanager

@contextmanager
def redirected_stdout():
    """Capture stdout so we can take a peek in tests"""
    orig_stdout = sys.stdout
    s = StringIO.StringIO()
    sys.stdout = s
    try:
        yield s
    finally:
        sys.stdout = orig_stdout

@contextmanager
def redirected_stderr():
    """Capture stderr so we can take a peek in tests"""
    orig_stderr = sys.stderr
    s = StringIO.StringIO()
    sys.stderr = s
    try:
        yield s
    finally:
        sys.stderr = orig_stderr
