# -*- coding: utf-8 -*-
"""Pyramid view definitions

These are used to set up decorated views provided by this package.
:ref:`Pyramid documentation <pyramid:views_chapter>`
"""
from __future__ import absolute_import

from pyramid.security import NO_PERMISSION_REQUIRED
from pyramid.view import view_config


@view_config(
    route_name='status.metrics',
    renderer='json',
    permission=NO_PERMISSION_REQUIRED,
)
def metrics_view(request):
    """Metrics view

    This function responds to the /status/metrics path for your application.

    It returns a JSON encoded dictionary containing recorded metrics for your
    application.
    """
    import uwsgi_metrics
    return uwsgi_metrics.view()
